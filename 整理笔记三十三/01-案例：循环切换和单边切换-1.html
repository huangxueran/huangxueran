<!doctype html><!--文档头信息-->
<html><!--根标签-->
<head><!--头部标签-->
    <meta charset="UTF-8"><!--字符编码-->
    <meta name="Generator" content="EditPlus®"><!--使用编辑器-->
    <meta name="Author" content="黄学然"><!--作者-->
    <meta name="Keywords" content="作业"><!--关键字-->
    <meta name="Description" content=""><!--描述-->
    <title>整理笔记（五）</title><!--网站标题-->
    <style>
        *{margin: 0;padding: 0;}
        body{font:16px/1.5 'Microsoft Yahei';}
        .clearfix:after{content:'';display:block;clear:both;}
        .fl{float:left;}
        .fr{float:right;}
        #wrap{
            width:700px;
            height:700px;
            background: #efefef;
            margin:50px auto;
            overflow:hidden;
            position: relative;
        }
        #wrap ul.content{
            width:660px;
            padding:10px;
            line-height:2.5;
            position: absolute;

        }
        #wrap ul.content li{
            border-bottom: 1px solid #fff;

        }
        #wrap .scrollbar{
            position: absolute;
            right:0;
            top:0;
            width:20px;
            height:698px;
            background-color: #ccc;
            box-shadow:0 0 6px 0 #666 inset;
            border-radius:10px;
            border:1px solid #888;
        }
        #wrap .scrollbar.hide{
            display: none;
        }
        #wrap .scrollbar i{
            position: absolute;
            width:100%;
            height:30px;
            background: #eee;
            border-radius: 10px;
        }
    </style>
</head>
<body >
<div id="wrap" >
    <ul class="content" >
        <li>
            <p>1、Life was like a box of chocolates, you never know what you're going to get.</p>
            <span>生命就像一盒巧克力，结果往往出人意料。</span>
        </li>
        <li>
            <p>2、Stupid is as stupid does.</p>
            <span>蠢人做蠢事，也可理解为傻人有傻福。</span>
        </li>
        <li>
            <p>3、Miracles happen every day.</p>
            <span>奇迹每天都在发生。</span>
        </li>
        <li>
            <p>4、it made me look like a duck in water.</p>
            <span>它让我如鱼得水。</span>
        </li>
        <li>
            <p>5、I don't know if we each have a destiny, or if we're all just floating around accidental—like on a breeze.</p>
            <span>我不懂我们是否有着各自的命运，还是只是到处随风飘荡。</span>
        </li>
        <li>
            <p>6、Death is just a part of life, something we're all destined to do.</p>
            <span>死亡是生命的一部分，是我们注定要做的一件事。</span>
        </li>
        <li>
            <p>7、You have got to put the past behind you before you can move on.</p>
            <span>放下包袱，继续前进。</span>
        </li>
        <li>
            <p>8、It was like just before the sun goes to bed down on the bayou. There was a million sparkles on the river.</p>
            <span>就像太阳在落山前映射在河口上，有无数的亮点在闪闪发光。</span>
        </li>
        <li>
            <p>9、If there is anything you need, I will not be far away.</p>
            <span>只要你需要，我就在这里。</span>
        </li>
        <li>
            <p>1、Life was like a box of chocolates, you never know what you're going to get.</p>
            <span>生命就像一盒巧克力，结果往往出人意料。</span>
        </li>
        <li>
            <p>2、Stupid is as stupid does.</p>
            <span>蠢人做蠢事，也可理解为傻人有傻福。</span>
        </li>
        <li>
            <p>3、Miracles happen every day.</p>
            <span>奇迹每天都在发生。</span>
        </li>
        <li>
            <p>4、it made me look like a duck in water.</p>
            <span>它让我如鱼得水。</span>
        </li>
        <li>
            <p>5、I don't know if we each have a destiny, or if we're all just floating around accidental—like on a breeze.</p>
            <span>我不懂我们是否有着各自的命运，还是只是到处随风飘荡。</span>
        </li>
        <li>
            <p>6、Death is just a part of life, something we're all destined to do.</p>
            <span>死亡是生命的一部分，是我们注定要做的一件事。</span>
        </li>
        <li>
            <p>7、You have got to put the past behind you before you can move on.</p>
            <span>放下包袱，继续前进。</span>
        </li>
        <li>
            <p>8、It was like just before the sun goes to bed down on the bayou. There was a million sparkles on the river.</p>
            <span>就像太阳在落山前映射在河口上，有无数的亮点在闪闪发光。</span>
        </li>
        <li>
            <p>9、If there is anything you need, I will not be far away.</p>
            <span>只要你需要，我就在这里。</span>
        </li>
        <li>
            <p>1、Life was like a box of chocolates, you never know what you're going to get.</p>
            <span>生命就像一盒巧克力，结果往往出人意料。</span>
        </li>
        <li>
            <p>2、Stupid is as stupid does.</p>
            <span>蠢人做蠢事，也可理解为傻人有傻福。</span>
        </li>
        <li>
            <p>3、Miracles happen every day.</p>
            <span>奇迹每天都在发生。</span>
        </li>
        <li>
            <p>4、it made me look like a duck in water.</p>
            <span>它让我如鱼得水。</span>
        </li>
        <li>
            <p>5、I don't know if we each have a destiny, or if we're all just floating around accidental—like on a breeze.</p>
            <span>我不懂我们是否有着各自的命运，还是只是到处随风飘荡。</span>
        </li>
        <li>
            <p>6、Death is just a part of life, something we're all destined to do.</p>
            <span>死亡是生命的一部分，是我们注定要做的一件事。</span>
        </li>
        <li>
            <p>7、You have got to put the past behind you before you can move on.</p>
            <span>放下包袱，继续前进。</span>
        </li>
        <li>
            <p>8、It was like just before the sun goes to bed down on the bayou. There was a million sparkles on the river.</p>
            <span>就像太阳在落山前映射在河口上，有无数的亮点在闪闪发光。</span>
        </li>
        <li>
            <p>9、If there is anything you need, I will not be far away.</p>
            <span>只要你需要，我就在这里。</span>
        </li>
        <li>
            <p>1、Life was like a box of chocolates, you never know what you're going to get.</p>
            <span>生命就像一盒巧克力，结果往往出人意料。</span>
        </li>
        <li>
            <p>2、Stupid is as stupid does.</p>
            <span>蠢人做蠢事，也可理解为傻人有傻福。</span>
        </li>
        <li>
            <p>3、Miracles happen every day.</p>
            <span>奇迹每天都在发生。</span>
        </li>
        <li>
            <p>4、it made me look like a duck in water.</p>
            <span>它让我如鱼得水。</span>
        </li>
        <li>
            <p>5、I don't know if we each have a destiny, or if we're all just floating around accidental—like on a breeze.</p>
            <span>我不懂我们是否有着各自的命运，还是只是到处随风飘荡。</span>
        </li>
        <li>
            <p>6、Death is just a part of life, something we're all destined to do.</p>
            <span>死亡是生命的一部分，是我们注定要做的一件事。</span>
        </li>
        <li>
            <p>7、You have got to put the past behind you before you can move on.</p>
            <span>放下包袱，继续前进。</span>
        </li>
        <li>
            <p>8、It was like just before the sun goes to bed down on the bayou. There was a million sparkles on the river.</p>
            <span>就像太阳在落山前映射在河口上，有无数的亮点在闪闪发光。</span>
        </li>
        <li>
            <p>9、If there is anything you need, I will not be far away.</p>
            <span>只要你需要，我就在这里。</span>
        </li>
        <li>
            <p>1、Life was like a box of chocolates, you never know what you're going to get.</p>
            <span>生命就像一盒巧克力，结果往往出人意料。</span>
        </li>
        <li>
            <p>2、Stupid is as stupid does.</p>
            <span>蠢人做蠢事，也可理解为傻人有傻福。</span>
        </li>
        <li>
            <p>3、Miracles happen every day.</p>
            <span>奇迹每天都在发生。</span>
        </li>
        <li>
            <p>4、it made me look like a duck in water.</p>
            <span>它让我如鱼得水。</span>
        </li>
        <li>
            <p>5、I don't know if we each have a destiny, or if we're all just floating around accidental—like on a breeze.</p>
            <span>我不懂我们是否有着各自的命运，还是只是到处随风飘荡。</span>
        </li>
        <li>
            <p>6、Death is just a part of life, something we're all destined to do.</p>
            <span>死亡是生命的一部分，是我们注定要做的一件事。</span>
        </li>
        <li>
            <p>7、You have got to put the past behind you before you can move on.</p>
            <span>放下包袱，继续前进。</span>
        </li>
        <li>
            <p>8、It was like just before the sun goes to bed down on the bayou. There was a million sparkles on the river.</p>
            <span>就像太阳在落山前映射在河口上，有无数的亮点在闪闪发光。</span>
        </li>
        <li>
            <p>9、If there is anything you need, I will not be far away.</p>
            <span>只要你需要，我就在这里。</span>
        </li>
    </ul>

    <div class="scrollbar">
        <i></i>
    </div>
</div>

<script>
    (function(){

        var oWrap = document.getElementById("wrap"),
            oContent = oWrap.getElementsByTagName("ul")[0],
            oScroll = oWrap.getElementsByTagName("div")[0],
            oBar = oScroll.children[0],

            wrapH = oWrap.offsetHeight,
            contentH = oContent.offsetHeight;

        //滑块大小的确定，以及后续事件的添加
        (function(){
            if( contentH <= wrapH ){
                //如果content比wrap小或者等，那么scrollbar应该隐藏
                oScroll.className += " hide";
            }else{
                //否则，按照比例来求出滑块的高度值
                var height = wrapH*wrapH/contentH,
                    maxTop = wrapH - height,
                    minTop = 0,
                    maxContent = contentH - wrapH

                //设定bar初始高度
                oBar.style.height = height + 'px';

                //变化bar的top和content的top
                function changeTop(top){
                    top = Math.min(top , maxTop);//限定最大值
                    top = Math.max(top , minTop);//限定最小值
                    //变化bar的top
                    oBar.style.top = top+'px';
                    //变化content的top
                    var contentTop = top * maxContent / maxTop;
                    oContent.style.top = - contentTop + 'px';
                };

                //拖拽滑块的事件
                (function(){
                    //按下
                    oBar.onmousedown = function (ev) {
                        ev = ev || window.event;

                        var downY = ev.clientY;//鼠标按下时的y坐标
                        var downTop = oBar.offsetTop;//滑块按下时的top

                        //移动
                        document.onmousemove = function (ev) {
                            ev = ev || window.event;
                            var moveY = ev.clientY;//鼠标移动时的y坐标
                            var y_ = moveY - downY;//y坐标变化量
                            var top = downTop + y_; //通过变化量得到此时的top值

                            //在这里求top最大最小值？？不行

                            changeTop(top);

                        };
                    };

                    //抬起
                    document.onmouseup = function (ev) {
                        this.onmousemove = null;
                    };
                })();

                //滚动事件
                (function(){
                    //wrap添加滚轮事件
                    mousewheel(oWrap,function (ev , dr) {
                        var top = oBar.offsetTop - dr*10;

                        changeTop(top);
                        return false;
                    });

                })();

                //点击scrollbar的事件
                (function(){
                    oScroll.onclick = function (ev) {
                        //只有点击空白处才有效
                        ev = ev || window.event;
                        if((ev.target||ev.srcElement)!==this)return;
                        var y = ev.layerY!==undefined?ev.layerY:ev.y;
                        changeTop( y - height/2 );
                    };
                })();
            }
        })();
    })();

    /*
    @param
        obj -- object 元素节点对象
        eFn  -- function 事件函数
    @return
        undefined
     */
    function mousewheel(obj, eFn) {
        function fn(e) {
            e = e || window.event;
            //让滚动方向和值统一
            var direction = e.wheelDelta / 120 || -e.detail / 3 ;
            if(eFn.call(obj, e, direction) === false){
                e.preventDefault ? e.preventDefault() : e.returnValue = false;
            }
        }
        //判断是否是火狐浏览器
        var type = document.onmousewheel === null?"mousewheel":"DOMMouseScroll";
        //判断是否是IE8
        window.addEventListener ? obj.addEventListener(type, fn)
            : obj.attachEvent("on" + type, fn);
    }
</script>
</body>
</html>